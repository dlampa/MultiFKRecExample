@*
    List of all patient records
*@

@{
    @*Create a table with patient records from the data received in ViewData*@

    <table class="table table-striped">
        <thead>
            <th>Name</th>
            <th>Vaccinations</th>
        </thead>
        <tbody>
            @{
                // Create a list of patients by casting contents of ViewData["Patients"] dictionary as List<Patient>
                List<Patient> patients = (List<Patient>)ViewData["Patients"];

                foreach (Patient patient in patients)
                {
                    <tr>
                        <td>
                            @(patient.Name)
                        </td>
                        <td>
                            @(string.Join(", ", patient.ImmunizationRecords.Select(x => x.ImmunizationData.ImmunizationDesc)))
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
}
